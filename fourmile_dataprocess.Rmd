---
title: "Fourmile"
author: "Megan Sears"
date: "7/27/2022"
output:
  html_document:
    toc: true
    toc_float: true
    theme: journal
editor_options: 
  chunk_output_type: console
---

```{r open package, include=FALSE}
library(tidyverse)
library(dplyr)
library(lubridate)
library(plotly)
library(ggplot2)
library(here)
library(scales)
library(here)
```

## Load data

```{r loading data}
setwd('C:/Users/sears/Documents/Repos/fourmile/data')

#pull in all filenames with composite
filenames <- list.files('.', pattern='.csv', full.names=F)

#read all the csvs
dataframes <- lapply(filenames, read_csv)

#name all the csv
names(dataframes) <- substr(filenames, 1, 4)

#extract csvs from list to global env
lapply(names(dataframes), function(x) assign(x, dataframes[[x]], envir = .GlobalEnv))
rm(dataframes)

daily_q <- orun %>%
  select(-1) %>%
  filter(!row_number() %in% c(1:9, 11:15)) %>%
  set_names(as.character(slice(., 1))) %>%
  slice(-1) %>%
  replace(.==-9999, NA) %>%
  rename(ds3 = 2,
         usgs1 = 3,
         ds2 = 4,
         usgs2 = 5,
         us1 = 6,
         ds1 = 7) %>%
  mutate(date = mdy(date)) %>%
  pivot_longer(!date, names_to = 'site', values_to = 'q_m3s') %>%
  mutate(q_m3s = as.numeric(q_m3s))

hydro <- ggplot(daily_q, aes(x=date, y=q_m3s, color=site)) + geom_line() +
  ylim(0,8)

ggplotly(hydro)

```

